<?php
/**
 * Whois.class..php
 * Author: Jansen
 * QQ: 6206574
 * Date: 2015-12-01
 */

namespace Common\Extend;


class Whois{
    static $server = array(
        '.aarp'                 => 'whois.nic.aarp',
        '.abbott'               => 'whois.afilias-srs.net',
        '.abogado'              => 'whois-dub.mm-registry.com',
        '.ac'                   => 'whois.nic.ac',
        '.academy'	            => 'whois.donuts.co',
        '.accountant'           => 'whois.nic.accountant',
        '.accountants'          => 'whois.donuts.co',
        '.aco'                  => 'whois.afilias-srs.net',
        '.active'               => 'whois.afilias-srs.net',
        '.actor'                => 'whois.unitedtld.com',
        '.ads'                  => 'domain-registry-whois.l.google.com',
        '.adult'                => 'whois.afilias-srs.net',
        '.ae'                   => 'whois.aeda.net.ae',
        '.aeg'                  => 'whois.nic.aeg',
        '.aero'                 => 'whois.aero',
        '.af'                   => 'whois.nic.af',
        '.afl'                  => 'whois.nic.afl',
        '.ag'                   => 'whois.nic.ag',
        '.agency'               => 'whois.donuts.co',
        '.ai'                   => 'whois.ai',
        '.aig'                  => 'whois.ksregistry.net',
        '.airforce'             => 'whois.unitedtld.com',
        '.airtel'               => 'whois.nic.airtel',
        '.allfinanz'            => 'whois.ksregistry.net',
        '.alsace'               => 'whois-alsace.nic.fr',
        '.am'                   => 'whois.amnic.net',
        '.android'              => 'domain-registry-whois.l.google.com',
        '.apartments'           => 'whois.donuts.co',
        '.app'                  => 'whois.nic.google',
        '.apple'                => 'whois.afilias-srs.net',
        '.aquarelle'            => 'whois-aquarelle.nic.fr',
        '.archi'                => 'whois.ksregistry.net',
        '.army'                 => 'whois.rightside.co',
        '.arpa'                 => 'whois.iana.org',
        '.arte'                 => 'whois.nic.arte',
        '.as'                   => 'whois.nic.as',
        '.asia'                 => 'whois.nic.asia',
        '.associates'           => 'whois.donuts.co',
        '.at'                   => 'whois.nic.at',
        '.attorney'             => 'whois.rightside.co',
        '.au'                   => 'whois.audns.net.au',
        '.auction'              => 'whois.unitedtld.com',
        '.audi'                 => 'whois.afilias-srs.net',
        '.audio'                => 'whois.uniregistry.net',
        '.auto'                 => 'whois.uniregistry.net',
        '.autos'                => 'whois.afilias-srs.net',
        '.aw'                   => 'whois.nic.aw',
        '.ax'                   => 'whois.ax',
        '.band'                 => 'whois.rightside.co',
        '.bank'                 => 'whois.nic.bank',
        '.bar'                  => 'whois.nic.bar',
        '.barcelona'            => 'whois.nic.barcelona',
        '.barclaycard'          => 'whois.nic.barclaycard',
        '.barclays'             => 'whois.nic.barclays',
        '.bargains'             => 'whois.donuts.co',
        '.bauhaus'              => 'whois.nic.bauhaus',
        '.bayern'               => 'whois-dub.mm-registry.com',
        '.bbc'                  => 'whois.nic.bbc',
        '.bbva'                 => 'whois.nic.bbva',
        '.bcn'                  => 'whois.nic.bcn',
        '.be'                   => 'whois.dns.be',
        '.beats'                => 'whois.afilias-srs.net',
        '.beer'                 => 'whois-dub.mm-registry.com',
        '.bentley'              => 'whois.nic.bentley',
        '.berlin'               => 'whois.nic.berlin',
        '.best'                 => 'whois.nic.best',
        '.bet'                  => 'whois.afilias.net',
        '.bg'                   => 'whois.register.bg',
        '.bi'                   => 'whois1.nic.bi',
        '.bid'                  => 'whois.nic.bid',
        '.bike'                 => 'whois.donuts.co',
        '.bingo'                => 'whois.donuts.co',
        '.bio'                  => 'whois.ksregistry.net',
        '.biz'                  => 'whois.biz',
        '.bj'                   => 'whois.nic.bj',
        '.black'                => 'whois.afilias.net',
        '.blackfriday'          => 'whois.uniregistry.net',
        '.blue'                 => 'whois.afilias.net',
        '.bms'                  => 'whois.nic.bms',
        '.bmw'                  => 'whois.ksregistry.net',
        '.bn'                   => 'whois.bnnic.bn',
        '.bnl'                  => 'whois.afilias-srs.net',
        '.bnpparibas'           => 'whois.afilias-srs.net',
        '.bo'                   => 'whois.afilias-srs.net',
        '.boats'                => 'whois.afilias-srs.net',
        '.boehringer'           => 'whois.afilias-srs.net',
        '.bom'                  => 'whois.gtlds.nic.br',
        '.bond'                 => 'whois.nic.bond',
        '.boo'                  => 'domain-registry-whois.l.google.com',
        '.boots'                => 'whois.nic.boots',
        '.bostik'               => 'whois-bostik.nic.fr',
        '.boutique'             => 'whois.donuts.co',
        '.br'                   => 'whois.registro.br',
        '.bradesco'             => 'whois-cl01.mm-registry.com',
        '.bridgestone'          => 'whois.nic.bridgestone',
        '.broadway'             => 'whois-cl01.mm-registry.com',
        '.broker'               => 'whois.nic.broker',
        '.brother'              => 'whois.nic.brother',
        '.brussels'             => 'whois.nic.brussels',
        '.budapest'             => 'whois-dub.mm-registry.com',
        '.bugatti'              => 'whois.afilias-srs.net',
        '.build'                => 'whois.nic.build',
        '.builders'             => 'whois.donuts.co',
        '.business'             => 'whois.donuts.co',
        '.bw'                   => 'whois.nic.net.bw',
        '.by'                   => 'whois.cctld.by',
        '.bzh'                  => 'whois-bzh.nic.fr',
        '.ca'                   => 'whois.cira.ca',
        '.cab'                  => 'whois.donuts.co',
        '.cafe'                 => 'whois.donuts.co',
        '.cal'                  => 'domain-registry-whois.l.google.com',
        '.camera'               => 'whois.donuts.co',
        '.camp'                 => 'whois.donuts.co',
        '.cancerresearch'       => 'whois.nic.cancerresearch',
        '.canon'                => 'whois.nic.canon',
        '.capetown'             => 'capetown-whois.registry.net.za',
        '.capital'              => 'whois.donuts.co',
        '.car'                  => 'whois.uniregistry.net',
        '.cards'                => 'whois.donuts.co',
        '.care'                 => 'whois.donuts.co',
        '.career'               => 'whois.nic.career',
        '.careers'              => 'whois.donuts.co',
        '.cars'                 => 'whois.uniregistry.net',
        '.casa'                 => 'whois-dub.mm-registry.com',
        '.cash'                 => 'whois.donuts.co',
        '.casino'               => 'whois.donuts.co',
        '.cat'                  => 'whois.cat',
        '.catering'             => 'whois.donuts.co',
        '.cba'                  => 'whois.nic.cba',
        '.cc'                   => 'ccwhois.verisign-grs.com',
        '.ceb'                  => 'whois.afilias-srs.net',
        '.center'               => 'whois.donuts.co',
        '.ceo'                  => 'whois.nic.ceo',
        '.cern'                 => 'whois.afilias-srs.net',
        '.cf'                   => 'whois.dot.cf',
        '.cfa'                  => 'whois.nic.cfa',
        '.cfd'                  => 'whois.nic.cfd',
        '.ch'                   => 'whois.nic.ch',
        '.chanel'               => 'whois.nic.chanel',
        '.channel'              => 'domain-registry-whois.l.google.com',
        '.chat'                 => 'whois.donuts.co',
        '.cheap'                => 'whois.donuts.co',
        '.christmas'            => 'whois.uniregistry.net',
        '.chrome'               => 'domain-registry-whois.l.google.com',
        '.church'               => 'whois.donuts.co',
        '.ci'                   => 'whois.nic.ci',
        '.cipriani'             => 'whois.afilias-srs.net',
        '.city'                 => 'whois.donuts.co',
        '.cityeats'             => 'whois.nic.cityeats',
        '.cl'                   => 'whois.nic.cl',
        '.claims'               => 'whois.donuts.co',
        '.cleaning'             => 'whois.donuts.co',
        '.click'                => 'whois.uniregistry.net',
        '.clinic'               => 'whois.donuts.co',
        '.clothing'             => 'whois.donuts.co',
        '.cloud'                => 'whois.nic.cloud',
        '.club'                 => 'whois.nic.club',
        '.clubmed'              => 'whois.nic.clubmed',
        '.cn'                   => 'whois.cnnic.cn',
        '.co'                   => 'whois.nic.co',
        '.coach'                => 'whois.donuts.co',
        '.codes'                => 'whois.donuts.co',
        '.coffee'               => 'whois.donuts.co',
        '.college'              => 'whois.nic.college',
        '.cologne'              => 'whois-fe1.pdt.cologne.tango.knipp.de',
        '.com'                  => 'whois.verisign-grs.com',
        '.commbank'             => 'whois.nic.commbank',
        '.community'            => 'whois.donuts.co',
        '.company'              => 'whois.donuts.co',
        '.computer'             => 'whois.donuts.co',
        '.comsec'               => 'whois.nic.comsec',
        '.condos'               => 'whois.donuts.co',
        '.construction'         => 'whois.donuts.co',
        '.consulting'           => 'whois.unitedtld.com',
        '.contractors'          => 'whois.donuts.co',
        '.cooking'              => 'whois-dub.mm-registry.com',
        '.cool'                 => 'whois.donuts.co',
        '.coop'                 => 'whois.nic.coop',
        '.corsica'              => 'whois-corsica.nic.fr',
        '.country'              => 'whois-dub.mm-registry.com',
        '.coupons'              => 'whois.donuts.co',
        '.courses'              => 'whois.aridnrs.net.au',
        '.cr'                   => 'whois.nic.cr',
        '.credit'               => 'whois.donuts.co',
        '.creditcard'           => 'whois.donuts.co',
        '.creditunion'          => 'whois.afilias-srs.net',
        '.cricket'              => 'whois.nic.cricket',
        '.cruises'              => 'whois.donuts.co',
        '.csc'                  => 'whois.nic.csc',
        '.cuisinella'           => 'whois.nic.cuisinella',
        '.cx'                   => 'whois.nic.cx',
        '.cymru'                => 'whois.nic.cymru',
        '.cyou'                 => 'whois.afilias-srs.net',
        '.cz'                   => 'whois.nic.cz',
        '.dabur'                => 'whois.afilias-srs.net',
        '.dad'                  => 'domain-registry-whois.l.google.com',
        '.dance'                => 'whois.unitedtld.com',
        '.date'                 => 'whois.nic.date',
        '.dating'               => 'whois.donuts.co',
        '.datsun'               => 'whois.nic.gmo',
        '.day'                  => 'domain-registry-whois.l.google.com',
        '.dclk'                 => 'domain-registry-whois.l.google.com',
        '.de'                   => 'whois.denic.de',
        '.deals'                => 'whois.donuts.co',
        '.degree'               => 'whois.rightside.co',
        '.delivery'             => 'whois.donuts.co',
        '.delta'                => 'whois.afilias-srs.net',
        '.democrat'             => 'whois.unitedtld.com',
        '.dental'               => 'whois.donuts.co',
        '.dentist'              => 'whois.rightside.co',
        '.desi'                 => 'whois.ksregistry.net',
        '.design'               => 'whois.nic.design',
        '.dev'                  => 'domain-registry-whois.l.google.com',
        '.diamonds'             => 'whois.donuts.co',
        '.diet'                 => 'whois.uniregistry.net',
        '.digital'              => 'whois.donuts.co',
        '.direct'               => 'whois.donuts.co',
        '.directory'            => 'whois.donuts.co',
        '.discount'             => 'whois.donuts.co',
        '.dk'                   => 'whois.dk-hostmaster.dk',
        '.dm'                   => 'whois.nic.dm',
        '.docs'                 => 'domain-registry-whois.l.google.com',
        '.dog'                  => 'whois.donuts.co',
        '.doha'                 => 'whois.nic.doha',
        '.domains'              => 'whois.donuts.co',
        '.doosan'               => 'whois.nic.doosan',
        '.download'             => 'whois.nic.download',
        '.drive'                => 'whois.nic.google',
        '.durban'               => 'durban-whois.registry.net.za',
        '.dvag'                 => 'whois.ksregistry.net',
        '.dz'                   => 'whois.nic.dz',
        '.eat'                  => 'domain-registry-whois.l.google.com',
        '.ec'                   => 'whois.nic.ec',
        '.edu'                  => 'whois.educause.edu',
        '.education'            => 'whois.donuts.co',
        '.ee'                   => 'whois.tld.ee',
        '.email'                => 'whois.donuts.co',
        '.emerck'               => 'whois.afilias-srs.net',
        '.energy'               => 'whois.donuts.co',
        '.engineer'             => 'whois.rightside.co',
        '.engineering'          => 'whois.donuts.co',
        '.enterprises'          => 'whois.donuts.co',
        '.epson'                => 'whois.aridnrs.net.au',
        '.equipment'            => 'whois.donuts.co',
        '.erni'                 => 'whois.nic.erni',
        '.es'                   => 'whois.nic.es',
        '.esq'                  => 'domain-registry-whois.l.google.com',
        '.estate'               => 'whois.donuts.co',
        '.eu'                   => 'whois.eu',
        '.eurovision'           => 'whois.nic.eurovision',
        '.eus'                  => 'whois.eus.coreregistry.net',
        '.events'               => 'whois.donuts.co',
        '.exchange'             => 'whois.donuts.co',
        '.expert'               => 'whois.donuts.co',
        '.exposed'              => 'whois.donuts.co',
        '.express'              => 'whois.donuts.co',
        '.fage'                 => 'whois.afilias-srs.net',
        '.fail'                 => 'whois.donuts.co',
        '.fairwinds'            => 'whois.nic.fairwinds',
        '.faith'                => 'whois.nic.faith',
        '.family'               => 'whois.rightside.co',
        '.fan'                  => 'whois.nic.fan',
        '.fans'                 => 'whois.nic.fans',
        '.farm'                 => 'whois.donuts.co',
        '.fashion'              => 'whois-dub.mm-registry.com',
        '.feedback'             => 'whois.nic.feedback',
        '.fi'                   => 'whois.fi',
        '.film'                 => 'whois.nic.film',
        '.final'                => 'whois.gtlds.nic.br',
        '.finance'              => 'whois.donuts.co',
        '.financial'            => 'whois.donuts.co',
        '.firmdale'             => 'whois.nic.firmdale',
        '.fish'                 => 'whois.donuts.co',
        '.fishing'              => 'whois-dub.mm-registry.com',
        '.fit'                  => 'whois-dub.mm-registry.com',
        '.fitness'              => 'whois.donuts.co',
        '.flights'              => 'whois.donuts.co',
        '.florist'              => 'whois.donuts.co',
        '.flowers'              => 'whois.uniregistry.net',
        '.flsmidth'             => 'whois.ksregistry.net',
        '.fly'                  => 'domain-registry-whois.l.google.com',
        '.fo'                   => 'whois.nic.fo',
        '.foo'                  => 'domain-registry-whois.l.google.com',
        '.football'             => 'whois.donuts.co',
        '.forex'                => 'whois.nic.forex',
        '.forsale'              => 'whois.unitedtld.com',
        '.forum'                => 'whois.nic.forum',
        '.foundation'           => 'whois.donuts.co',
        '.fr'                   => 'whois.nic.fr',
        '.frl'                  => 'whois.nic.frl',
        '.frogans'              => 'whois-frogans.nic.fr',
        '.fund'                 => 'whois.donuts.co',
        '.furniture'            => 'whois.donuts.co',
        '.futbol'               => 'whois.unitedtld.com',
        '.fyi'                  => 'whois.donuts.co',
        '.gal'                  => 'whois.gal.coreregistry.net',
        '.gallery'              => 'whois.donuts.co',
        '.game'                 => 'whois.uniregistry.net',
        '.garden'               => 'whois-dub.mm-registry.com',
        '.gbiz'                 => 'domain-registry-whois.l.google.com',
        '.gd'                   => 'whois.nic.gd',
        '.gdn'                  => 'whois.nic.gdn',
        '.gea'                  => 'whois.afilias-srs.net',
        '.gent'                 => 'whois.nic.gent',
        '.genting'              => 'whois.nic.genting',
        '.gg'                   => 'whois.gg',
        '.ggee'                 => 'whois.nic.ggee',
        '.gi'                   => 'whois2.afilias-grs.net',
        '.gift'                 => 'whois.uniregistry.net',
        '.gifts'                => 'whois.donuts.co',
        '.gives'                => 'whois.rightside.co',
        '.giving'               => 'whois.nic.giving',
        '.gl'                   => 'whois.nic.gl',
        '.glass'                => 'whois.donuts.co',
        '.gle'                  => 'domain-registry-whois.l.google.com',
        '.global'               => 'whois.nic.global',
        '.globo'                => 'whois.gtlds.nic.br',
        '.gmail'                => 'domain-registry-whois.l.google.com',
        '.gmx'                  => 'whois-fe1.gmx.tango.knipp.de',
        '.gold'                 => 'whois.donuts.co',
        '.goldpoint'            => 'whois.nic.goldpoint',
        '.golf'                 => 'whois.donuts.co',
        '.goo'                  => 'whois.nic.gmo',
        '.goog'                 => 'domain-registry-whois.l.google.com',
        '.google'               => 'domain-registry-whois.l.google.com',
        '.gop'                  => 'whois-cl01.mm-registry.com',
        '.gov'                  => 'whois.dotgov.gov',
        '.gq'                   => 'whois.dominio.gq',
        '.graphics'             => 'whois.donuts.co',
        '.gratis'               => 'whois.donuts.co',
        '.green'                => 'whois.afilias.net',
        '.gripe'                => 'whois.donuts.co',
        '.group'                => 'whois.donuts.co',
        '.gs'                   => 'whois.nic.gs',
        '.guge'                 => 'domain-registry-whois.l.google.com',
        '.guide'                => 'whois.donuts.co',
        '.guitars'              => 'whois.uniregistry.net',
        '.guru'                 => 'whois.donuts.co',
        '.gy'                   => 'whois.registry.gy',
        '.hamburg'              => 'whois.nic.hamburg',
        '.hangout'              => 'domain-registry-whois.l.google.com',
        '.haus'                 => 'whois.unitedtld.com',
        '.healthcare'           => 'whois.donuts.co',
        '.help'                 => 'whois.uniregistry.net',
        '.here'                 => 'domain-registry-whois.l.google.com',
        '.hermes'               => 'whois.afilias-srs.net',
        '.hiphop'               => 'whois.uniregistry.net',
        '.hitachi'              => 'whois.nic.gmo',
        '.hiv'                  => 'whois.afilias-srs.net',
        '.hk'                   => 'whois.hkirc.hk',
        '.hm'                   => 'whois.registry.hm',
        '.hn'                   => 'whois.nic.hn',
        '.hockey'               => 'whois.donuts.co',
        '.holdings'             => 'whois.donuts.co',
        '.holiday'              => 'whois.donuts.co',
        '.homedepot'            => 'whois.afilias-srs.net',
        'homes'                 => 'whois.afilias-srs.net',
        '.honda'                => 'whois.nic.honda',
        '.horse'                => 'whois-dub.mm-registry.com',
        '.host'                 => 'whois.nic.host',
        '.hosting'              => 'whois.uniregistry.net',
        '.house'                => 'whois.donuts.co',
        '.how'                  => 'domain-registry-whois.l.google.com',
        '.hr'                   => 'whois.dns.hr',
        '.ht'                   => 'whois.nic.ht',
        '.hu'                   => 'whois.nic.hu',
        '.hyundai'              => 'whois.nic.hyundai',
        '.ibm'                  => 'whois.nic.ibm',
        '.icbc'                 => 'whois.afilias-srs.net',
        '.ice'                  => 'whois.nic.ice',
        '.icu'                  => 'whois.nic.icu',
        '.id'                   => 'whois.pandi.or.id',
        '.ie'                   => 'whois.domainregistry.ie',
        '.ifm'                  => 'whois.nic.ifm',
        '.iinet'                => 'whois.aridnrs.net.au',
        '.il'                   => 'whois.isoc.org.il',
        '.im'                   => 'whois.nic.im',
        '.immo'                 => 'whois.donuts.co',
        '.immobilien'           => 'whois.unitedtld.com',
        '.in'                   => 'whois.inregistry.net',
        '.industries'           => 'whois.donuts.co',
        '.infiniti'             => 'whois.nic.gmo',
        '.info'                 => 'whois.afilias.net',
        '.ing'                  => 'domain-registry-whois.l.google.com',
        '.ink'                  => 'whois.nic.ink',
        '.institute'            => 'whois.donuts.co',
        '.insure'               => 'whois.donuts.co',
        '.int'                  => 'whois.iana.org',
        '.international'        => 'whois.donuts.co',
        '.investments'          => 'whois.donuts.co',
        '.io'                   => 'whois.nic.io',
        '.iq'                   => 'whois.cmc.iq',
        '.ir'                   => 'whois.nic.ir',
        '.irish'                => 'whois.afilias-srs.net',
        '.is'                   => 'whois.isnic.is',
        '.ist'                  => 'whois.afilias-srs.net',
        '.istanbul'             => 'whois.afilias-srs.net',
        '.it'                   => 'whois.nic.it',
        '.jaguar'               => 'whois.nic.jaguar',
        '.java'                 => 'whois.nic.java',
        '.jcb'                  => 'whois.nic.gmo',
        '.je'                   => 'whois.je',
        '.jewelry'              => 'whois.donuts.co',
        '.jll'                  => 'whois.afilias-srs.net',
        '.jobs'                 => 'jobswhois.verisign-grs.com',
        '.joburg'               => 'joburg-whois.registry.net.za',
        '.jp'                   => 'whois.jprs.jp',
        '.juegos'               => 'whois.uniregistry.net',
        '.kaufen'               => 'whois.unitedtld.com',
        '.kddi'                 => 'whois.nic.kddi',
        '.ke'                   => 'whois.kenic.or.ke',
        '.kg'                   => 'whois.domain.kg',
        '.ki'                   => 'whois.nic.ki',
        '.kia'                  => 'whois.nic.kia',
        '.kim'                  => 'whois.afilias.net',
        '.kitchen'              => 'whois.donuts.co',
        '.kiwi'                 => 'whois.nic.kiwi',
        '.koeln'                => 'whois-fe1.pdt.koeln.tango.knipp.de',
        '.komatsu'              => 'whois.nic.komatsu',
        '.kr'                   => 'whois.kr',
        '.krd'                  => 'whois.aridnrs.net.au',
        '.ky'                   => 'whois.kyregistry.ky',
        '.kyoto'                => 'whois.nic.kyoto',
        '.kz'                   => 'whois.nic.kz',
        '.la'                   => 'whois.nic.la',
        '.lacaixa'              => 'whois.nic.lacaixa',
        '.lamborghini'          => 'whois.afilias-srs.net',
        '.lancaster'            => 'whois-lancaster.nic.fr',
        '.land'                 => 'whois.donuts.co',
        '.landrover'            => 'whois.nic.landrover',
        '.lasalle'              => 'whois.afilias-srs.net',
        '.lat'                  => 'whois.nic.lat',
        '.latrobe'              => 'whois.nic.latrobe',
        '.law'                  => 'whois-dub.mm-registry.com',
        '.lawyer'               => 'whois.rightside.co',
        '.lds'                  => 'whois.afilias-srs.net',
        '.lease'                => 'whois.donuts.co',
        '.leclerc'              => 'whois-leclerc.nic.fr',
        '.legal'                => 'whois.donuts.co',
        '.lexus'                => 'whois.nic.lexus',
        '.lgbt'                 => 'whois.afilias.net',
        '.li'                   => 'whois.nic.li',
        '.liaison'              => 'whois.nic.liaison',
        '.lidl'                 => 'whois.nic.lidl',
        '.life'                 => 'whois.donuts.co',
        '.lifestyle'            => 'whois.nic.lifestyle',
        '.lighting'             => 'whois.donuts.co',
        '.limited'              => 'whois.donuts.co',
        '.limo'                 => 'whois.donuts.co',
        '.linde'                => 'whois.nic.linde',
        '.link'                 => 'whois.uniregistry.net',
        '.live'                 => 'whois.rightside.co',
        '.lixil'                => 'whois.nic.lixil',
        '.loan'                 => 'whois.nic.loan',
        '.loans'                => 'whois.donuts.co',
        '.lol'                  => 'whois.uniregistry.net',
        '.london'               => 'whois-lon.mm-registry.com',
        '.lotte'                => 'whois.nic.lotte',
        '.lotto'                => 'whois.afilias.net',
        '.love'                 => 'whois.nic.love',
        '.lt'                   => 'whois.domreg.lt',
        '.ltd'                  => 'whois.donuts.co',
        '.ltda'                 => 'whois.afilias-srs.net',
        '.lu'                   => 'whois.dns.lu',
        '.luxe'                 => 'whois-dub.mm-registry.com',
        '.luxury'               => 'whois.nic.luxury ',
        '.lv'                   => 'whois.nic.lv',
        '.ly'                   => 'whois.nic.ly',
        '.ma'                   => 'whois.registre.ma',
        '.madrid'               => 'whois.madrid.rs.corenic.net',
        '.maison'               => 'whois.donuts.co',
        '.man'                  => 'whois.nic.man',
        '.management'           => 'whois.donuts.co',
        '.mango'                => 'whois.mango.coreregistry.net',
        '.market'               => 'whois.rightside.co',
        '.marketing'            => 'whois.donuts.co',
        '.markets'              => 'whois.nic.markets',
        '.marriott'             => 'whois.afilias-srs.net',
        '.mba'                  => 'whois.donuts.co',
        '.md'                   => 'whois.nic.md',
        '.me'                   => 'whois.nic.me',
        '.media'                => 'whois.donuts.co',
        '.meet'                 => 'whois.afilias.net',
        '.melbourne'            => 'whois.aridnrs.net.au',
        '.meme'                 => 'domain-registry-whois.l.google.com',
        '.memorial'             => 'whois.donuts.co',
        '.men'                  => 'whois.nic.men',
        '.menu'                 => 'whois.nic.menu',
        '.mg'                   => 'whois.nic.mg',
        '.miami'                => 'whois-dub.mm-registry.com',
        '.mini'                 => 'whois.ksregistry.net',
        '.mk'                   => 'whois.marnet.mk',
        '.ml'                   => 'whois.dot.ml',
        '.mma'                  => 'whois-mma.nic.fr',
        '.mn'                   => 'whois.nic.mn',
        '.mo'                   => 'whois.monic.mo',
        '.mobi'                 => 'whois.dotmobiregistry.net',
        '.moda'                 => 'whois.unitedtld.com',
        '.moe'                  => 'whois.nic.moe',
        '.mom'                  => 'whois.uniregistry.net',
        '.monash'               => 'whois.nic.monash',
        '.money'                => 'whois.donuts.co',
        '.mormon'               => 'whois.afilias-srs.net',
        '.mortgage'             => 'whois.rightside.co',
        '.moscow'               => 'whois.nic.moscow',
        '.motorcycles'          => 'whois.afilias-srs.net',
        '.mov'                  => 'domain-registry-whois.l.google.com',
        '.movie'                => 'whois.donuts.co',
        '.movistar'             => 'whois-fe.movistar.tango.knipp.de',
        '.mp'                   => 'whois.nic.mp',
        '.ms'                   => 'whois.nic.ms',
        '.mtn'                  => 'whois.nic.mtn',
        '.mtpc'                 => 'whois.nic.gmo',
        '.mtr'                  => 'whois.nic.mtr',
        '.mu'                   => 'whois.nic.mu',
        '.museum'               => 'whois.museum',
        '.mutuelle'             => 'whois-mutuelle.nic.fr',
        '.mx'                   => 'whois.mx',
        '.my'                   => 'whois.mynic.my',
        '.mz'                   => 'whois.nic.mz',
        '.na'                   => 'whois.na-nic.com.na',
        '.nadex'                => 'whois.nic.nadex',
        '.name'                 => 'whois.nic.name',
        '.navy'                 => 'whois.rightside.co',
        '.nc'                   => 'whois.nc',
        '.nec'                  => 'whois.nic.nec',
        '.net'                  => 'whois.verisign-grs.com',
        '.netbank'              => 'whois.nic.netbank',
        '.network'              => 'whois.donuts.co',
        '.new'                  => 'domain-registry-whois.l.google.com',
        '.news'                 => 'whois.rightside.co',
        '.nexus'                => 'domain-registry-whois.l.google.com',
        '.nf'                   => 'whois.nic.nf',
        '.ng'                   => 'whois.nic.net.ng',
        '.ngo'                  => 'whois.publicinterestregistry.net',
        '.nico'                 => 'whois.nic.nico',
        '.ninja'                => 'whois.unitedtld.com',
        '.nissan'               => 'whois.nic.gmo',
        '.nl'                   => 'whois.domain-registry.nl',
        '.no'                   => 'whois.norid.no',
        '.nokia'                => 'whois.afilias-srs.net',
        '.nra'                  => 'whois.afilias-srs.net',
        '.nrw'                  => 'whois.nic.nrw',
        '.nu'                   => 'whois.iis.nu',
        '.nz'                   => 'whois.srs.net.nz',
        '.obi'                  => 'whois.nic.obi',
        '.om'                   => 'whois.registry.om',
        '.omega'                => 'whois.nic.omega',
        '.one'                  => 'whois.nic.one',
        '.ong'                  => 'whois.publicinterestregistry.net',
        '.onl'                  => 'whois.afilias-srs.net',
        '.online'               => 'whois.centralnic.com ',
        '.ooo'                  => 'whois.nic.ooo',
        '.oracle'               => 'whois.nic.oracle',
        '.orange'               => 'whois.nic.orange',
        '.org'                  => 'whois.pir.org',
        '.organic'              => 'whois.afilias.ne',
        '.osaka'                => 'whois.nic.osaka',
        '.ovh'                  => 'whois-ovh.nic.fr',
        '.page'                 => 'domain-registry-whois.l.google.com',
        '.paris'                => 'whois-paris.nic.fr',
        '.partners'             => 'whois.donuts.co',
        '.parts'                => 'whois.donuts.co',
        '.party'                => 'whois.nic.party',
        '.pe'                   => 'kero.yachay.pe',
        '.pet'                  => 'whois.afilias.net',
        '.pf'                   => 'whois.registry.pf',
        '.philips'              => 'whois.nic.philips',
        '.photo'                => 'whois.uniregistry.net',
        '.photography'          => 'whois.donuts.co',
        '.photos'               => 'whois.donuts.co',
        '.physio'               => 'whois.nic.physio',
        '.pics'                 => 'whois.uniregistry.net',
        '.pictures'             => 'whois.donuts.co',
        '.pink'                 => 'whois.afilias.net',
        '.pizza'                => 'whois.donuts.co',
        '.pl'                   => 'whois.dns.pl',
        '.place'                => 'whois.donuts.co',
        '.play'                 => 'whois.nic.google',
        '.playstation'          => 'whois.nic.playstation',
        '.plumbing'             => 'whois.donuts.co',
        '.plus'                 => 'whois.donuts.co',
        '.pm'                   => 'whois.nic.pm',
        '.pohl'                 => 'whois.ksregistry.net',
        '.poker'                => 'whois.afilias.net',
        '.porn'                 => 'whois.afilias-srs.net',
        '.post'                 => 'whois.dotpostregistry.net',
        '.pr'                   => 'whois.nic.pr',
        '.press'                => 'whois.nic.press',
        '.pro'                  => 'whois.dotproregistry.net',
        '.prod'                 => 'domain-registry-whois.l.google.com',
        '.productions'          => 'whois.donuts.co',
        '.prof'                 => 'domain-registry-whois.l.google.com',
        '.properties'           => 'whois.donuts.co',
        '.property'             => 'whois.uniregistry.net',
        '.protection'           => 'whois.nic.protection',
        '.pt'                   => 'whois.dns.pt',
        '.pub'                  => 'whois.unitedtld.com',
        '.pw'                   => 'whois.nic.pw',
        '.qa'                   => 'whois.registry.qa',
        '.quebec'               => 'whois.nic.quebec',
        '.racing'               => 'whois.nic.racing',
        '.re'                   => 'whois.nic.re',
        '.realty'               => 'whois.nic.realty',
        '.recipes'              => 'whois.donuts.co',
        '.red'                  => 'whois.afilias.net',
        '.redstone'             => 'whois.afilias-srs.net',
        '.rehab'                => 'whois.rightside.co',
        '.reise'                => 'whois.nic.reise',
        '.reisen'               => 'whois.donuts.co',
        '.reit'                 => 'whois.nic.reit',
        '.rent'                 => 'whois.nic.rent',
        '.rentals'              => 'whois.donuts.co',
        '.repair'               => 'whois.donuts.co',
        '.report'               => 'whois.donuts.co',
        '.republican'           => 'whois.rightside.co',
        '.rest'                 => 'whois.nic.rest',
        '.restaurant'           => 'whois.donuts.co',
        '.review'               => 'whois.nic.review',
        '.reviews'              => 'whois.unitedtld.com',
        '.rich'                 => 'whois.afilias-srs.net',
        '.ricoh'                => 'whois.nic.ricoh',
        '.rio'                  => 'whois.gtlds.nic.br',
        '.rip'                  => 'whois.rightside.co',
        '.ro'                   => 'whois.rotld.ro',
        '.rocks'                => 'whois.unitedtld.com',
        '.rodeo'                => 'whois-dub.mm-registry.com',
        '.rs'                   => 'whois.rnids.rs',
        '.rsvp'                 => 'domain-registry-whois.l.google.com',
        '.ru'                   => 'whois.tcinet.ru',
        '.ruhr'                 => 'whois.nic.ruhr',
        '.run'                  => 'whois.donuts.co',
        '.rwe'                  => 'whois.nic.rwe',
        '.sa'                   => 'whois.nic.net.sa',
        '.saarland'             => 'whois.ksregistry.net',
        '.sale'                 => 'whois.rightside.co',
        '.samsung'              => 'whois.nic.samsung',
        '.sandvik'              => 'whois.nic.sandvik',
        '.sandvikcoromant'      => 'whois.nic.sandvikcoromant',
        '.sanofi'               => 'whois.nic.sanofi',
        '.sap'                  => 'whois.nic.sap',
        '.sarl'                 => 'whois.donuts.co',
        '.saxo'                 => 'whois.aridnrs.net.au',
        '.sb'                   => 'whois.nic.net.sb',
        '.sbs'                  => 'whois.nic.sbs',
        '.sc'                   => 'whois2.afilias-grs.net',
        '.sca'                  => 'whois.nic.sca',
        '.scb'                  => 'whois.nic.scb',
        '.schmidt'              => 'whois.nic.schmidt',
        '.scholarships'         => 'whois.afilias-srs.net',
        '.school'               => 'whois.donuts.co',
        '.schule'               => 'whois.donuts.co',
        '.schwarz'              => 'whois.nic.schwarz',
        '.science'              => 'whois.nic.science',
        '.scor'                 => 'whois.nic.scor',
        '.scot'                 => 'whois.scot.coreregistry.net',
        '.se'                   => 'whois.iis.se',
        '.seat'                 => 'whois.nic.seat',
        '.security'             => 'whois.nic.security',
        '.seek'                 => 'whois.nic.seek',
        '.services'             => 'whois.donuts.co',
        '.seven'                => 'whois.nic.seven',
        '.sew'                  => 'whois.afilias-srs.net',
        '.sex'                  => 'whois.afilias-srs.net',
        '.sexy'                 => 'whois.uniregistry.net',
        '.sg'                   => 'whois.sgnic.sg',
        '.sh'                   => 'whois.nic.sh',
        '.shiksha'              => 'whois.afilias.net',
        '.shoes'                => 'whois.donuts.co',
        '.show'                 => 'whois.donuts.co',
        '.shriram'              => 'whois.afilias-srs.net',
        '.si'                   => 'whois.register.si',
        '.singles'              => 'whois.donuts.co',
        '.site'                 => 'whois.centralnic.com',
        '.sk'                   => 'whois.sk-nic.sk',
        '.ski'                  => 'whois.ksregistry.net',
        '.sky'                  => 'whois.nic.sky',
        '.sm'                   => 'whois.nic.sm',
        '.sn'                   => 'whois.nic.sn',
        '.sncf'                 => 'whois-sncf.nic.fr',
        '.so'                   => 'whois.nic.so',
        '.soccer'               => 'whois.donuts.co',
        '.social'               => 'whois.unitedtld.com',
        '.software'             => 'whois.rightside.co',
        '.solar'                => 'whois.donuts.co',
        '.solutions'            => 'whois.donuts.co',
        '.sony'                 => 'whois.nic.sony',
        '.soy'                  => 'domain-registry-whois.l.google.com',
        '.space'                => 'whois.nic.space',
        '.spiegel'              => 'whois.ksregistry.net',
        '.spreadbetting'        => 'whois.nic.spreadbetting',
        '.srl'                  => 'whois.afilias-srs.net',
        '.st'                   => 'whois.nic.st',
        '.stada'                => 'whois.afilias-srs.net',
        '.starhub'              => 'whois.nic.starhub',
        '.statoil'              => 'whois.nic.statoil',
        '.stc'                  => 'whois.centralnic.com',
        '.stcgroup'             => 'whois.centralnic.com',
        '.stockholm'            => 'whois.afilias-srs.ne',
        '.studio'               => 'whois.rightside.co',
        '.study'                => 'whois.nic.study',
        '.style'                => 'whois.donuts.co',
        '.su'                   => 'whois.tcinet.ru',
        '.sucks'                => 'whois.nic.sucks',
        '.supplies'             => 'whois.donuts.co',
        '.supply'               => 'whois.donuts.co',
        '.support'              => 'whois.donuts.co',
        '.surf'                 => 'whois-dub.mm-registry.com',
        '.surgery'              => 'whois.donuts.co',
        '.swatch'               => 'whois.nic.swatch',
        '.swiss'                => 'whois.nic.swiss',
        '.sx'                   => 'whois.sx',
        '.sy'                   => 'whois.tld.sy',
        '.sydney'               => 'whois.nic.sydney',
        '.systems'              => 'whois.donuts.co',
        '.tab'                  => 'whois.nic.tab',
        '.taipei'               => 'whois.nic.taipei',
        '.tatamotors'           => 'whois.nic.tatamotors',
        '.tatar'                => 'whois.nic.tatar',
        '.tattoo'               => 'whois.uniregistry.net',
        '.tax'                  => 'whois.donuts.co',
        '.taxi'                 => 'whois.donuts.co',
        '.tc'                   => 'whois.nic.tc',
        '.team'                 => 'whois.donuts.co',
        '.tech'                 => 'whois.nic.tech',
        '.technology'           => 'whois.donuts.co',
        '.tel'                  => 'whois.nic.tel',
        '.telefonica'           => 'whois-fe.telefonica.tango.knipp.de',
        '.temasek'              => 'whois.afilias-srs.net',
        '.tennis'               => 'whois.donuts.co',
        '.tf'                   => 'whois.nic.tf',
        '.th'                   => 'whois.thnic.co.th',
        '.thd'                  => 'whois.afilias-srs.net',
        '.theater'              => 'whois.donuts.co',
        '.theatre'              => 'whois.nic.theatre',
        '.tickets'              => 'whois.nic.tickets',
        '.tienda'               => 'whois.donuts.co',
        '.tips'                 => 'whois.donuts.co',
        '.tires'                => 'whois.donuts.co',
        '.tirol'                => 'whois.nic.tirol',
        '.tk'                   => 'whois.dot.tk',
        '.tl'                   => 'whois.nic.tl',
        '.tm'                   => 'whois.nic.tm',
        '.tn'                   => 'whois.ati.tn',
        '.to'                   => 'whois.tonic.to',
        '.today'                => 'whois.donuts.co',
        '.tools'                => 'whois.donuts.co',
        '.top'                  => 'whois.nic.top',
        '.toray'                => 'whois.nic.toray',
        '.toshiba'              => 'whois.nic.toshiba',
        '.tours'                => 'whois.donuts.co',
        '.town'                 => 'whois.donuts.co',
        '.toyota'               => 'whois.nic.toyota',
        '.toys'                 => 'whois.donuts.co',
        '.tr'                   => 'whois.nic.tr',
        '.trade'                => 'whois.nic.trade',
        '.trading'              => 'whois.nic.trading',
        '.training'             => 'whois.donuts.co',
        '.travel'               => 'whois.nic.travel',
        '.trust'                => 'whois.nic.trust',
        '.tui'                  => 'whois.ksregistry.net',
        '.tv'                   => 'tvwhois.verisign-grs.com',
        '.tw'                   => 'whois.twnic.net.tw',
        '.tz'                   => 'whois.tznic.or.tz',
        '.ua'                   => 'whois.ua',
        '.ubs'                  => 'whois.nic.ubs',
        '.ug'                   => 'whois.co.ug',
        '.uk'                   => 'whois.nic.uk',
        '.university'           => 'whois.donuts.co',
        '.uol'                  => 'whois.gtlds.nic.br',
        '.us'                   => 'whois.nic.us',
        '.uy'                   => 'whois.nic.org.uy',
        '.uz'                   => 'whois.cctld.uz',
        '.vacations'            => 'whois.donuts.co',
        '.vana'                 => 'whois.nic.vana',
        '.vc'                   => 'whois2.afilias-grs.net',
        '.ve'                   => 'whois.nic.ve',
        '.vegas'                => 'whois.afilias-srs.net',
        '.ventures'             => 'whois.donuts.co',
        '.verisign'             => 'whois.nic.verisign',
        '.versicherung'         => 'whois.nic.versicherung',
        '.vet'                  => 'whois.rightside.co',
        '.vg'                   => 'whois.nic.vg',
        '.viajes'               => 'whois.donuts.co',
        '.video'                => 'whois.rightside.co',
        '.villas'               => 'whois.donuts.co',
        '.vin'                  => 'whois.donuts.co',
        '.vip'                  => 'whois-dub.mm-registry.com',
        '.virgin'               => 'whois.nic.virgin',
        '.vision'               => 'whois.donuts.co',
        '.vista'                => 'whois.nic.vista',
        '.vistaprint'           => 'whois.nic.vistaprint',
        '.viva'                 => 'whois.centralnic.com',
        '.vlaanderen'           => 'whois.nic.vlaanderen',
        '.vodka'                => 'whois-dub.mm-registry.com',
        '.vote'                 => 'whois.afilias.net',
        '.voting'               => 'whois.voting.tld-box.at',
        '.voto'                 => 'whois.afilias.net',
        '.voyage'               => 'whois.donuts.co',
        '.vu'                   => 'vunic.vu',
        '.wales'                => 'whois.nic.wales',
        '.walter'               => 'whois.nic.walter',
        '.wang'                 => 'whois.gtld.knet.cn',
        '.watch'                => 'whois.donuts.co',
        '.webcam'               => 'whois.nic.webcam',
        '.website'              => 'whois.nic.website',
        '.wed'                  => 'whois.nic.wed',
        '.wedding'              => 'whois-dub.mm-registry.com',
        '.wf'                   => 'whois.nic.wf',
        '.whoswho'              => 'whois.nic.whoswho',
        '.wien'                 => 'whois.nic.wien',
        '.wiki'                 => 'whois.nic.wiki',
        '.win'                  => 'whois.nic.win',
        '.wine'                 => 'whois.donuts.co',
        '.wme'                  => 'whois.nic.wme',
        '.work'                 => 'whois-dub.mm-registry.com',
        '.works'                => 'whois.donuts.co',
        '.world'                => 'whois.donuts.co',
        '.ws'                   => 'whois.website.ws',
        '.wtc'                  => 'whois.nic.wtc',
        '.wtf'                  => 'whois.donuts.co',
        '.xerox'                => 'whois.nic.xerox',
        '.xin'                  => 'whois.afilias-srs.net',
        '.xn--1qqw23a'          => 'whois.ngtld.cn',
        '.xn--30rr7y'           => 'whois.nic.wang',
        '.xn--3bst00m'          => 'whois.gtld.knet.cn',
        '.xn--3ds443g'          => 'whois.afilias-srs.net',
        '.xn--3pxu8k'           => 'whois.nic.xn--3pxu8k',
        '.xn--45q11c'           => 'whois.nic.xn--45q11c',
        '.xn--55qw42g'          => 'whois.conac.cn',
        '.xn--55qx5d'           => 'whois.ngtld.cn',
        '.xn--6frz82g'          => 'whois.afilias.net',
        '.xn--6qq986b3xl'       => 'whois.gtld.knet.cn',
        '.xn--9et52u'           => 'whois.nic.wang',
        '.xn--b4w605ferd'       => 'whois.afilias-srs.net',
        '.xn--czrs0t'           => 'whois.donuts.co',
        '.xn--czru2d'           => 'whois.gtld.knet.cn',
        '.xn--efvy88h'          => 'whois.nic.xn--efvy88h',
        '.xn--estv75g'          => 'whois.afilias-srs.net',
        '.xn--fiq228c5hs'       => 'whois.afilias-srs.net',
        '.xn--fiq64b'           => 'whois.gtld.knet.cn',
        '.xn--fiqs8s'           => 'cwhois.cnnic.cn',
        '.xn--fiqz9s'           => 'cwhois.cnnic.cn',
        '.xn--fjq720a'          => 'whois.donuts.co',
        '.xn--flw351e'          => 'domain-registry-whois.l.google.com',
        '.xn--hxt814e'          => 'whois.nic.xn--hxt814e',
        '.xn--io0a7i'           => 'whois.ngtld.cn',
        '.xn--j6w193g'          => 'whois.hkirc.hk',
        '.xn--kcrx77d1x4a'      => 'whois.nic.xn--kcrx77d1x4a',
        '.xn--kprw13d'          => 'whois.twnic.net.tw',
        '.xn--kpry57d'          => 'whois.twnic.net.tw',
        '.xn--kput3i'           => 'whois.afilias-srs.net',
        '.xn--mxtq1m'           => 'whois.nic.xn--mxtq1m',
        '.xn--nqv7f'            => 'whois.publicinterestregistry.net',
        '.xn--nqv7fs00ema'      => 'whois.publicinterestregistry.net',
        '.xn--pssy2u'           => 'whois.nic.xn--pssy2u',
        '.xn--ses554g'          => 'whois.registry.knet.cn',
        '.xn--unup4y'           => 'whois.donuts.co',
        '.xn--vhquv'            => 'whois.donuts.co',
        '.xn--vuq861b'          => 'whois.ngtld.cn',
        '.xn--xhq521b'          => 'whois.ngtld.cn',
        '.xn--yfro4i67o'        => 'whois.sgnic.sg',
        '.xn--zfr164b'          => 'whois.conac.cn',
        '.xperia'               => 'whois.nic.xperia',
        '.xxx'                  => 'whois.nic.xxx',
        '.xyz'                  => 'whois.nic.xyz',
        '.yachts'               => 'whois.afilias-srs.net',
        '.yodobashi'            => 'whois.nic.gmo',
        '.yoga'                 => 'whois-dub.mm-registry.com',
        '.youtube'              => 'domain-registry-whois.l.google.com',
        '.yt'                   => 'whois.nic.yt',
        '.zara'                 => 'whois.afilias-srs.net',
        '.zip'                  => 'domain-registry-whois.l.google.com',
        '.zm'                   => 'whois.nic.zm',
        '.zone'                 => 'whois.donuts.co',
        '.zuerich'              => 'whois.ksregistry.net'
    );
    static $detail_server = '';
    static $suffix = '';

    /**
     * @param string $domain
     * @return array
     */
    public function query($domain){
        $domain = idn_to_ascii(strtolower($domain));
        self::$suffix = substr($domain, strrpos($domain, '.'));
        self::$detail_server = self::$server[self::$suffix];
        $result = $this->_get(self::$detail_server, $domain, false);
        if ($result == false)   return array('status'=>500, 'data'=>array());
        if (preg_match('/Whois Server:(?: )?(.*)/i', $result, $match)){
            if ($match[1] != self::$server[self::$suffix]) {
                self::$detail_server = $match[1];
                $result = $this->_get(self::$detail_server, $domain, false);
                if ($result == false)   return array('status'=>500, 'data'=>array());
            }
        }elseif (preg_match('/To single out one record,/', $result, $match)){
            unset($match);
            $result = $this->_get(self::$detail_server, $domain, true);
            if ($result == false)   return array('status'=>500, 'data'=>array());
            if (preg_match('/Whois Server:(?: )?(.*)/i', $result, $match)){
                if ($match[1] != self::$server[self::$suffix]) {
                    self::$detail_server = $match[1];
                    $result = $this->_get(self::$detail_server, $domain, false);
                    if ($result == false)   return array('status'=>500, 'data'=>array());
                }
            }
        }
        if (preg_match('/No match for "'.strtoupper($domain).'"/', $result, $match)){
            return array('status'=>404, 'data'=>array());
        }
        if (preg_match('/No matching record./', $result, $match)){
            return array('status'=>404, 'data'=>array());
        }
        $whois = $this->_parse($result);
        return array('status'=>$whois['status'], 'data'=>$whois['message']);
    }
    
    private function _parse($source){
        //
        $filePath = __DIR__.'/Whois/Templates/'.self::$detail_server.self::$suffix.'.wt';
        if (!file_exists($filePath)){
            $filePath = __DIR__.'/Whois/Templates/common'.self::$suffix.'.wt';
            if (!file_exists($filePath)){
                return array('status'=>500, 'message'=>'');
            }
        }
        //
        $template = file_get_contents($filePath);
        if (empty($template)){
            return array('status'=>500, 'message'=>'');
        }
        if (!preg_match_all('/\%([A-Z0-9_]+)\%/', $template, $tags)){
            return array('status'=>500, 'message'=>'');
        }
        $template = preg_replace('/\%([A-Z0-9_]+)\%/', '(.*)', $template);
        //\r\n
        $template = str_replace(array("\r", '/'), array("", '\/'), $template);
        $template = str_replace("\n", "\r\n", $template);
        //whois\r\n
        $source = str_replace("\r", "", $source);
        $source = str_replace("\n", "\r\n", $source);
        //
        $source = $this->_clean($source);
        if (preg_match('/'.$template.'/', $source, $values) > 0){
            $tags = $tags[1];
            array_shift($values);
            if (count($tags) != count($values)){
                return array('status'=>500, 'message'=>'');
            }
            $result = array_combine(array_map('strtolower', $tags), array_map('strtolower', $values));
            foreach ($result as $key => $value){
                list($key1, $key2) = explode('_', $key, 2);
                $result[$key1][$key2] = $value;
                unset($result[$key]);
            }
            return array('status'=>200, 'message'=>$result);
        }
        return array('status'=>500, 'message'=>'');
    }
    private function _get($server, $domain, $summary=true){
        $handle = fsockopen($server, 43, $errorno, $errormsg, 5);
        if ($handle == false)   return false;
        if ($summary == true) {
            fwrite($handle, 'domain ' . $domain . "\r\n");
        }else{
            fwrite($handle, $domain . "\r\n");
        }
        stream_set_timeout($handle, 5);
        $result = '';
        while (!feof($handle)){
            $result .= fgets($handle);
        }
        fclose($handle);
        return $result;
    }
    private function _clean($source){
        $source = preg_replace("/Registry Domain ID:(.*)\r\n/", '', $source);
        $source = preg_replace("/(Sponsoring )?Registrar IANA ID:(.*)\r\n/", '', $source);
        $source = preg_replace("/Referral URL:(.*)\r\n/", '', $source);
        $source = preg_replace("/Registrar URL:(.*)\r\n/", '', $source);
        $source = preg_replace("/Registrar Abuse Contact Email:(.*)\r\n/", '', $source);
        $source = preg_replace("/Registrar Abuse Contact Phone:(.*)\r\n/", '', $source);
        $source = preg_replace("/(Domain )?Status:(.*)\r\n/", '', $source);
        $source = preg_replace("/Reseller:(.*)\r\n/", '', $source);
        return $source;
    }
}